<div class="div-table ">
  <div>
    <table mat-table [dataSource]="lop.lopList" class="mat-elevation-z8">

      <ng-container matColumnDef="Aktion">
        <th class="th-Aktion" mat-header-cell *matHeaderCellDef> Aktion </th>
        <td mat-cell *matCellDef="let lop">
            <app-sys-button icon="edit" color="accent" tooltip="Bearbeiten" (click)="editLop(lop.id)"></app-sys-button>
            <app-sys-button icon="delete" tooltip="Löschen" (click)="deleteLop(lop.id,lop.item)"></app-sys-button>
        </td>
      </ng-container>

      <ng-container matColumnDef="Aufnahme">
        <th mat-header-cell *matHeaderCellDef> Aufnahme </th>
        <td mat-cell *matCellDef="let lop">{{lop.startDate}}</td>
      </ng-container>

      <ng-container matColumnDef="von">
        <th mat-header-cell *matHeaderCellDef> von </th>
        <td mat-cell *matCellDef="let lop">{{lop.issuer}}</td>
      </ng-container>

      <ng-container matColumnDef="Übermittlungsart">
        <th mat-header-cell *matHeaderCellDef> Übermittlungsart </th>
        <td mat-cell *matCellDef="let lop">{{lop.transmissionType}}</td>
      </ng-container>

      <ng-container matColumnDef="ToDo">
        <th mat-header-cell *matHeaderCellDef> ToDo </th>
        <td mat-cell *matCellDef="let lop">{{lop.item}}</td>
      </ng-container>

      <ng-container matColumnDef="Zusatz">
        <th mat-header-cell *matHeaderCellDef> Zusatz </th>
        <td mat-cell *matCellDef="let lop">{{lop.addition}}</td>
      </ng-container>

      <ng-container matColumnDef="Status">
        <th class="th-center" mat-header-cell *matHeaderCellDef> Status </th>
        <td class="th-center" mat-cell *matCellDef="let lop">

          <button [ngClass]="{
          'status-erledigt': lop.status=='ERLEDIGT',
          'status-offen': lop.status=='OFFEN',
          'status-in-arbeit': lop.status=='INARBEIT'
          }" mat-button [matMenuTriggerFor]="menu">
            {{lop.status}}
          </button>
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="changeToOFFEN(lop.id)">OFFEN</button>
            <button mat-menu-item (click)="changeToINARBEIT(lop.id)">INARBEIT</button>
            <button mat-menu-item (click)="changeToERLEDIGT(lop.id)">ERLEDIGT</button>
          </mat-menu>

        </td>
      </ng-container>

      <ng-container matColumnDef="Erledigt">
        <th class="th-center" mat-header-cell *matHeaderCellDef> Erledigt </th>
        <td class="th-center" mat-cell *matCellDef="let lop">{{lop.endDate}}</td>
      </ng-container>

      <ng-container matColumnDef="Benutzer">
        <th class="th-center" mat-header-cell *matHeaderCellDef> Benutzer </th>
        <td class="th-center" mat-cell *matCellDef="let lop">{{lop.userAcronym}}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <mat-divider class="mt-4"></mat-divider>
  <div class="d-flex flex-row-reverse">
    <button class="mt-2" mat-raised-button color="accent" (click)="addLop()">LOP Hinzufügen</button>
  </div>
</div>
